function clickDocumentDetect(){document.body.classList.remove("tab-user"),document.removeEventListener("click",clickDocumentDetect)}document.body.onkeydown=function(e){9===e.keyCode&&(document.body.classList.add("tab-user"),document.addEventListener("click",clickDocumentDetect))};var navToggle=document.querySelector(".main-nav__toggle"),mainHeader=document.querySelector(".main-header"),mainNav=document.querySelector(".main-nav");if(mainNav.classList.remove("main-nav--nojs"),mainHeader.classList.remove("main-header--nojs"),navToggle.addEventListener("click",function(){mainHeader.classList.toggle("main-header--open"),mainNav.classList.contains("main-nav--open")?(mainNav.classList.remove("main-nav--open"),mainNav.classList.add("main-nav--close")):(mainNav.classList.remove("main-nav--close"),mainNav.classList.add("main-nav--open"))}),document.getElementById("YMapsID")){var myMap,myPlacemar;function init(){(myMap=new ymaps.Map("YMapsID",{center:[34.870874,-111.762654],zoom:10,controls:[]})).behaviors.disable("scrollZoom"),myMap.controls.add("zoomControl"),myMap.controls.add("fullscreenControl"),myMap.controls.add("typeSelector"),myMap.controls.get("typeSelector").options.set("size","small"),myPlacemark=new ymaps.Placemark([34.870874,-111.762654],{hintContent:"Sedona",balloonContent:""},{iconLayout:"default#image",iconImageHref:"img/icon-map-marker.svg",iconImageSize:[27,27],iconImageOffset:[-6,-6]}),myMap.geoObjects.add(myPlacemark)}ymaps.ready(init)}var SLIDE_EVENT="slide",progressBarElement=document.querySelector(".video-player__progress-bar");if(progressBarElement){var progressBar=new Slider({elem:progressBarElement,max:100});try{new CustomEvent("IE has CustomEvent, but doesn't support constructor")}catch(e){window.CustomEvent=function(e,t){var o;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(o=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o},CustomEvent.prototype=Object.create(window.Event.prototype)}function Slider(e){var t,o,n,a,s=e.elem,r=s.querySelector(".video-player__thumb"),c=e.max||100;function m(e,t){var o;s.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:{pos:(o=t,Math.round(o/a)),filt_type:e}}))}function i(e){!function(e){var o=e-n-t.left;o<0&&(o=0);var a=s.offsetWidth-r.offsetWidth;o>a&&(o=a),r.style.left=o/s.offsetWidth*100+"%",m(SLIDE_EVENT,o)}(e.clientX||e.touches[0].clientX)}function l(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",l)}a=(s.offsetWidth-r.offsetWidth)/c,s.ondragstart=function(){return!1},s.ontouchstart=s.onmousedown=function(e){if(e.target.classList.contains("video-player__thumb")){var a=e.clientX||e.touches[0].clientX;e.clientY||e.touches[0].clientY;return c=a,o=r.getBoundingClientRect(),t=s.getBoundingClientRect(),n=c-o.left,document.addEventListener("mousemove",i),document.addEventListener("mouseup",l),document.addEventListener("touchmove",i),document.addEventListener("touchend",l),!1}var c},this.setValue=function(e){var t=a*e;console.log(e+", "+t),r.style.left=t/s.offsetWidth*100+"%",m(SLIDE_EVENT,t)}}}var popupSuccess=document.querySelector(".popup--success"),popupError=document.querySelector(".popup--error"),reviewsForm=document.querySelector(".reviews__form"),userName=document.getElementById("user_name"),userFam=document.getElementById("user_fam"),phone=document.getElementById("tel"),email=document.getElementById("mail"),storageName=localStorage.getItem("user_name"),storageFam=localStorage.getItem("user_fam"),storagePhone=localStorage.getItem("phone"),storageEmail=localStorage.getItem("email");if(reviewsForm){function showPopup(e,t){e.classList.remove("popup--close"),e.classList.add("popup--open"),e.querySelector(".popup__btn").addEventListener("click",function(){e.classList.contains("popup--success")&&t.submit(),closePopup(e)}),document.addEventListener("keydown",function(t){27===t.keyCode&&closePopup(e)})}function closePopup(e){e.classList.remove("popup--open"),e.classList.add("popup--close")}storageName&&(userName.value=storageName),storageFam&&(userFam.value=storageFam),storagePhone&&(phone.value=storagePhone),storageEmail&&(email.value=storageEmail);var onFormInvaliv=function(e){showPopup(popupError);var t=e.target;t.classList.add("reviews__field--error"),t.addEventListener("focus",function(){t.classList.remove("reviews__field--error")})};reviewsForm.addEventListener("invalid",onFormInvaliv,!0),reviewsForm.addEventListener("submit",function(e){showPopup(popupSuccess,reviewsForm),localStorage.setItem("user_name",userName.value),localStorage.setItem("user_fam",userFam.value),localStorage.setItem("phone",phone.value),localStorage.setItem("email",email.value),e.preventDefault()})}